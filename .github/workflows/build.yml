name: Build and Publish
on:
  pull_request: {}
  push:
    branches:
      - master
      - stable
      - ember-2.7.0-3.4.0
      - ember-0.0.0-2.7.0
    tags:
      - v*
  schedule:
    - cron: '0 0 * * *'

jobs:
  test:
    name: Test
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v1
      - name: Set up Volta
        uses: rwjblue/setup-volta@v1
      - name: Echo
        run: yarn cache dir
      - name: List (before)
        run: ls -al $(yarn cache dir)
      - name: Set up build cache (yarn)
        uses: actions/cache@v1
        with:
          path: ~/.cache/yarn
          key: ${{ runner.os }}-yarn
      - name: List (after)
        run: ls -al $(yarn cache dir)
      - name: Install dependencies (yarn)
        run: yarn install
      - name: List (after install)
        run: ls -al $(yarn cache dir)
