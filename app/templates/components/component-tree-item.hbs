<div
  style={{@item.style}}
  class="
    component-tree-item
    {{if @item.isComponent "component-tree-item--component"}}
    {{if @item.hasInstance "component-tree-item--has-instance"}}
    {{if @item.isSelected "component-tree-item--selected"}}
    {{if @item.isHighlighted "component-tree-item--highlighted"}}"
  {{on "click" @item.toggleInspection}}
  {{on "mouseenter" @item.showPreview}}
  {{on "mouseleave" @item.hidePreview}}
>
  {{#if @item.hasChildren}}
    <Ui::DisclosureTriangle
      class="component-tree-item__expand"
      title="Click to toggle (alt/option click to toggle with children)"
      @toggle={{@item.toggleExpansion}}
      @expanded={{@item.isExpanded}}
    />
  {{/if}}

  <code
    class="component-tree-item__tag
      {{if
        (and (not @item.isCurlyInvocation) @item.isComponent)
        "component-tree-item__bracket"
      }}
      {{if
        (and (not @item.isCurlyInvocation) (not @item.hasChildren) @item.isComponent)
        "component-tree-item__bracket--self-closing"
      }}
      {{if
        (and @item.isCurlyInvocation @item.isComponent)
        "component-tree-item-classic__bracket"
      }}"
  >
    {{#if @item.isComponent}}
      {{#if @item.args.positional}}
        <span class="component-name">
          {{@item.name}}
        </span>

        {{#each @item.args.positional as |value|}}
          <div class="arg-token">
            <span class="value-token">
              {{component-argument value}}
            </span>
          </div>
        {{/each}}

        {{#each-in @item.args.named as |name value|}}
          <div class="arg-token">
            <span class="key-token">
              {{name}}
            </span>
            =
            <span class="value-token">
              {{component-argument value}}
            </span>
          </div>
        {{/each-in}}
      {{else}}
        <span class="component-name">
          {{classify @item.name}}
        </span>

        {{#each-in @item.args.named as |name value|}}
          <div class="arg-token">
            {{#if (is-string value)}}
              <span class="at-token">
                @
              </span>
              <span class="key-token">
                {{name}}
              </span>
              ="
              <span class="value-token">
                {{component-argument value}}
              </span>
              "
            {{else}}
              <span class="at-token">
                @
              </span>
              <span class="key-token">
                {{name}}
              </span>
              =
              <span class="bracket-token">\{{</span>
              <span class="value-token">
                {{component-argument value}}
              </span>
              <span class="bracket-token">}}</span>
            {{/if}}
          </div>
        {{/each-in}}
      {{/if}}
    {{else if @item.isOutlet}}
      \{{outlet "{{@item.name}}"}}
    {{else if @item.isEngine}}
      \{{mount "{{@item.name}}"}}
    {{else if @item.isRouteTemplate}}
      {{@item.name}} route
    {{/if}}
  </code>

  {{#if @item.hasBounds}}
    <button
      class="component-tree-item__action js-scroll-into-view"
      title="Scroll into view"
      {{on "click" @item.scrollIntoView}}
    >
      {{svg-jar "eye" width="20px" height="20px"}}
    </button>

    <button
      class="component-tree-item__action js-view-dom-element"
      title="View in Elements panel"
      {{on "click" @item.inspectElement}}
    >
      {{svg-jar "code-line" width="20px" height="20px"}}
    </button>
  {{/if}}
</div>